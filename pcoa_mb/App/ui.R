library(rgl)
library(car)
library(shiny)
library("RColorBrewer")

#######################################################################################
###                                      NOTES                                      ###
#######################################################################################
#This code is written to take in the generated pCOA weighted unifrac values and generate
#a pCOA plot using the top three values. It will also allow users to upload a labels 
#document, which will allow for additional visualization of categorical labels. Users can 
#select color labels form a drop down list, generated from the names of column headers

#######################################################################################
###                                      Code                                      ###
#######################################################################################
fluidPage(
  
  #Create two navigation pages, 1) Input files | 2) pCOA Plots
  navbarPage("Microbime QC Testing",
    
             ##Create Page#1: Input File
             tabPanel("Input Files",
                      ###Sidebar includes the NOTE that files must be txt,
                      ###input files (data and labels), and exectuion button
                      sidebarLayout(
                        sidebarPanel(
                          helpText("NOTE: File should be a txt file"),
                          fileInput("file","Upload the pCOA_data_file"),
                          fileInput("file2","Upload the labels_file"),
                          actionButton("goButton", "Generate pCOA Plot")
                        ),
                        ###Main panel include summary of data files accepted
                        mainPanel = (
                          uiOutput("tb")
                        )
                      )
             ),
             ##Create Page#2: PCOA PLOTS
             tabPanel("pCOA Plots",
                      ###First Row contains the drop down selector of column names, generated
                      ###from data_labels file
                      fluidRow(
                        column(2,
                               uiOutput("choose_dataset")
                        )
                      ),
                      ###Second Row contains the pCOA plot and legend of colors
                      fluidRow(
                        column(6,
                               rglwidgetOutput("plot",  width = 800, height = 800)
                        ),
                        column(5,
                               plotOutput("legend", width = 400, height=800)
                        )
                      )
             )
  )
)

